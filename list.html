<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Liste des réservations</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>
</head>
<body>
<!-- Header -->
<div class="d-flex justify-content-between align-items-center mb-3">
    <h1>📅 Réservations</h1>
    <a class="btn btn-primary" th:href="@{/reservations/new}">➕ Nouvelle réservation</a>
</div>

<!-- Message si aucune réservation -->
<div th:if="${#lists.isEmpty(reservations)}" class="alert alert-info">
    Aucune réservation trouvée.
</div>

<!-- Tableau des réservations -->
<table class="table table-striped align-middle" th:if="${!#lists.isEmpty(reservations)}">
    <thead class="table-dark">
    <tr>
        <th>ID</th>
        <th>Client</th>
        <th>Objet</th>
        <th>Début</th>
        <th>Fin</th>
        <th>Statut</th>
        <th class="text-center">Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="res : ${reservations}">
        <td th:text="${res.id}">1</td>
        <td th:text="${res.client != null ? res.client.name : '—'}">Client</td>
        <td th:text="${res.reservationLabel}">Objet</td>
        <td th:text="${res.dateStart != null ? #temporals.format(res.dateStart, 'yyyy-MM-dd HH:mm') : '—'}">2025-09-20 14:00</td>
        <td th:text="${res.dateEnd != null ? #temporals.format(res.dateEnd, 'yyyy-MM-dd HH:mm') : '—'}">2025-09-22 11:00</td>
        <td>
            <span th:switch="${res.status}">
                <span th:case="'PENDING'" class="badge bg-warning text-dark">En attente</span>
                <span th:case="'CONFIRMED'" class="badge bg-success">Confirmée</span>
                <span th:case="'CANCELLED'" class="badge bg-danger">Annulée</span>
                <span th:case="'COMPLETED'" class="badge bg-secondary">Terminée</span>
                <span th:case="*">—</span>
            </span>
        </td>
        <td class="text-center">
            <!-- Voir -->
            <a th:href="@{/reservations/{id}(id=${res.id})}" class="btn btn-sm btn-outline-primary me-1">👁 Voir</a>

            <!-- Supprimer -->
            <!--<form th:action="@{/reservations/{id}/delete(id=${res.id})}" method="post" style="display:inline-block"
                  onsubmit="return confirm('Supprimer cette réservation ?');">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <button type="submit" class="btn btn-sm btn-outline-danger">🗑 Suppr.</button>
            </form>-->
        </td>
    </tr>
    </tbody>
</table>